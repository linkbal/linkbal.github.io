---
title: 街コンジャパンの技術
permalink: /tech/mj
---
# 街コンジャパンの技術

## 技術スタック
- アプリケーション：Ruby on Rails 6, Nuxt 2
- インフラ：EC2, MySQL, Elastic Search, Redis, Memcached

## 主要システムのコード規模
```
サーバーサイド
$ find app -type f -name '*.rb' | xargs wc | tail -1
   58743  147834 2245254 total

クライアントサイド
$ find . -name '*.vue' | xargs wc | tail -1
   43065  111521 1475398 total
$ find . -name '*.js' | xargs wc | tail -1
   20139   48438  605000 total

モデル数
$ ls app/models/*.rb | wc
     197     197    6237
```

## コードの「年齢」
現在の街コンジャパンのシステムは、社内では MJ2（MJ v2）と呼ばれています。v1 は、2012年3月から2016年10月まで稼働していた、Wordpress ベースのシステムでした。独自のプラグインを多数開発して運用していた、Wordpress としてはかなり複雑なシステムです。真実は誰にもわからないものの、Wordpress で作られた ECサイトとしては日本最大の売り上げを出しているのではないか、と言われたこともあります。Wordpressサイトで上場した企業さんって、どのくらいあるのでしょうか？

v2 は、2016年10月にリリースされた、Ruby on Railsベースのシステムです。今でもこのシステムを改良し続けながら利用しています。フルリニューアルしたくなるほどの技術的負債も溜まっていない、と社内では評価していますが、「いや、こういう風にリニューアルすると売り上げも保守性も上がるんだ」と宣言する、あなたのようなエンジニアの参加を心からお待ちしています。

実は社内の人の記憶にもほとんど残っていない、v0 とでも呼ぶべき、Wiki で作られた街コンジャパンが v1 の前に存在しました。街コンのイベントコンテンツを Wiki に掲載し、クレジットカード決済は CGI のスクリプトで処理していました。

## システムアーキテクチャ
![System Architecture](/assets/images/mj_system_arch.png)
